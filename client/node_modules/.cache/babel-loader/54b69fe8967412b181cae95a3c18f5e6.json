{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\noogler\\\\Documents\\\\tutorgenic\\\\dev\\\\client\\\\src\\\\components\\\\Auth.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Auth(props) {\n  _s();\n\n  useEffect(() => {\n    const ac = new AbortController();\n    axios.get('/auth/isLoggedIn').then(res => res.data).catch(err => console.log(err)).then(res => {\n      if (res.isLoggedIn) {\n        window.open('/home', '_self');\n      } else if (props.error) {\n        alert(props.error);\n      }\n    }).catch(err => console.log(err));\n    return () => {\n      ac.abort();\n    };\n  }, [props.error]);\n  const loginFormRef = useRef();\n  const registerFormRef = useRef();\n  const [displayLogin, setDisplayLogin] = useState(true);\n  const [email, setEmail] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  function displayLoginForm() {\n    if (!displayLogin) {\n      setEmail(\"\");\n      setFirstName(\"\");\n      setLastName(\"\");\n      setPassword(\"\");\n    }\n\n    setDisplayLogin(true);\n    document.getElementById(\"login\").style.left = \"50px\";\n    document.getElementById(\"register\").style.left = \"450px\";\n    document.getElementById(\"btn\").style.left = \"0px\";\n  }\n\n  function displayRegisterForm() {\n    if (displayLogin) {\n      setEmail(\"\");\n      setFirstName(\"\");\n      setLastName(\"\");\n      setPassword(\"\");\n    }\n\n    setDisplayLogin(false);\n    document.getElementById(\"login\").style.left = \"-400px\";\n    document.getElementById(\"register\").style.left = \"50px\";\n    document.getElementById(\"btn\").style.left = \"110px\";\n  }\n\n  function handleChangeEmail(event) {\n    setEmail(event.target.value);\n  }\n\n  function handleChangeFirstName(event) {\n    setFirstName(event.target.value);\n  }\n\n  function handleChangeLastName(event) {\n    setLastName(event.target.value);\n  }\n\n  function handleChangePassword(event) {\n    setPassword(event.target.value);\n  }\n\n  function handleLogin(event) {\n    event.preventDefault();\n    const formData = new FormData(loginFormRef.current);\n    axios({\n      method: 'post',\n      url: '/auth/login',\n      data: formData,\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(res => res.data).catch(err => console.log(err)).then(res => {\n      if (res.isLoggedIn) {\n        window.open('/home', '_self');\n      } else {\n        alert('Wrong credentials');\n      }\n    }).catch(err => console.log(err));\n  }\n\n  function handleRegister(event) {\n    event.preventDefault();\n    console.log('register');\n    const formData = new FormData(registerFormRef.current);\n    axios({\n      method: 'post',\n      url: '/auth/register',\n      data: formData,\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(res => res.data).catch(err => console.log(err)).then(res => {\n      if (res.success) {\n        window.open('/home', '_self');\n      } else {\n        alert('Failed to register');\n      }\n    }).catch(err => console.log(err));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"hero\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: \"auto\"\n        },\n        children: \"Tutorgenic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"btn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"toggle-btn\",\n          onClick: displayLoginForm,\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"toggle-btn\",\n          onClick: displayRegisterForm,\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this), displayLogin && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"social-icons\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: process.env.PUBLIC_URL + '/images/google.png',\n          alt: \"google login\",\n          onClick: () => {\n            window.location.href = \"/auth/google\";\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 30\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"login\",\n        ref: loginFormRef,\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"username\",\n          value: email,\n          onChange: handleChangeEmail,\n          type: \"text\",\n          className: \"input-field\",\n          placeholder: \"Enter your email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          value: password,\n          onChange: handleChangePassword,\n          type: \"password\",\n          className: \"input-field\",\n          placeholder: \"Enter your password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-btn\",\n          onClick: handleLogin,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"register\",\n        ref: registerFormRef,\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"firstName\",\n          value: firstName,\n          onChange: handleChangeFirstName,\n          type: \"text\",\n          className: \"input-field\",\n          placeholder: \"Enter your first name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"lastName\",\n          value: lastName,\n          onChange: handleChangeLastName,\n          type: \"text\",\n          className: \"input-field\",\n          placeholder: \"Enter your last name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"username\",\n          value: email,\n          onChange: handleChangeEmail,\n          type: \"text\",\n          className: \"input-field\",\n          placeholder: \"Enter your email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          value: password,\n          onChange: handleChangePassword,\n          type: \"password\",\n          className: \"input-field\",\n          placeholder: \"Create a password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-btn\",\n          onClick: handleRegister,\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 12\n  }, this);\n}\n\n_s(Auth, \"O+HLj6mf/ADFXhPWljwWhZFa7qc=\");\n\n_c = Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["C:/Users/noogler/Documents/tutorgenic/dev/client/src/components/Auth.js"],"names":["useState","useEffect","useRef","axios","Auth","props","ac","AbortController","get","then","res","data","catch","err","console","log","isLoggedIn","window","open","error","alert","abort","loginFormRef","registerFormRef","displayLogin","setDisplayLogin","email","setEmail","firstName","setFirstName","lastName","setLastName","password","setPassword","displayLoginForm","document","getElementById","style","left","displayRegisterForm","handleChangeEmail","event","target","value","handleChangeFirstName","handleChangeLastName","handleChangePassword","handleLogin","preventDefault","formData","FormData","current","method","url","headers","handleRegister","success","margin","process","env","PUBLIC_URL","location","href"],"mappings":"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","sourcesContent":["import {useState, useEffect, useRef} from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function Auth(props) {\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n            .then(res => res.data)\r\n            .catch(err => console.log(err))\r\n            .then(res => {\r\n                if (res.isLoggedIn) {\r\n                    window.open('/home', '_self');\r\n                } else if (props.error) {\r\n                    alert(props.error);\r\n                }\r\n            })\r\n            .catch(err => console.log(err));\r\n        return () => {\r\n            ac.abort();\r\n        }\r\n    }, [props.error]);\r\n    const loginFormRef = useRef();\r\n    const registerFormRef = useRef();\r\n    const [displayLogin, setDisplayLogin] = useState(true);\r\n    const [email, setEmail] = useState(\"\");\r\n    const [firstName, setFirstName] = useState(\"\");\r\n    const [lastName, setLastName] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    function displayLoginForm() {\r\n        if (!displayLogin) {\r\n            setEmail(\"\");\r\n            setFirstName(\"\");\r\n            setLastName(\"\");\r\n            setPassword(\"\");\r\n        }\r\n        setDisplayLogin(true);\r\n        document.getElementById(\"login\").style.left = \"50px\";\r\n        document.getElementById(\"register\").style.left = \"450px\";\r\n        document.getElementById(\"btn\").style.left = \"0px\";\r\n    }\r\n\r\n    function displayRegisterForm() {\r\n        if (displayLogin) {\r\n            setEmail(\"\");\r\n            setFirstName(\"\");\r\n            setLastName(\"\");\r\n            setPassword(\"\");\r\n        }\r\n        setDisplayLogin(false);\r\n        document.getElementById(\"login\").style.left = \"-400px\";\r\n        document.getElementById(\"register\").style.left = \"50px\";\r\n        document.getElementById(\"btn\").style.left = \"110px\";\r\n    }\r\n\r\n    function handleChangeEmail(event) {\r\n        setEmail(event.target.value);\r\n    }\r\n\r\n    function handleChangeFirstName(event) {\r\n        setFirstName(event.target.value);\r\n    }\r\n\r\n    function handleChangeLastName(event) {\r\n        setLastName(event.target.value);\r\n    }\r\n\r\n    function handleChangePassword(event) {\r\n        setPassword(event.target.value);\r\n    }\r\n\r\n    function handleLogin(event) {\r\n        event.preventDefault();\r\n        const formData = new FormData(loginFormRef.current);\r\n        axios({\r\n            method: 'post',\r\n            url: '/auth/login',\r\n            data: formData,\r\n            headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res => res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n            if (res.isLoggedIn) {\r\n                window.open('/home', '_self');\r\n            } else {\r\n                alert('Wrong credentials');\r\n            }\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n\r\n    function handleRegister(event) {\r\n        event.preventDefault();\r\n        console.log('register');\r\n        const formData = new FormData(registerFormRef.current);\r\n        axios({\r\n            method: 'post',\r\n            url: '/auth/register',\r\n            data: formData,\r\n            headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res => res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n            if (res.success) {\r\n                window.open('/home', '_self');\r\n            } else {\r\n                alert('Failed to register');\r\n            }\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n\r\n    return <div className=\"hero\">\r\n        <div className=\"form-box\">\r\n            <h2 style={{margin: \"auto\"}}>Tutorgenic</h2>\r\n            <div className=\"button-box\">\r\n                <div id=\"btn\"></div>\r\n                <button type=\"button\" className=\"toggle-btn\" onClick={displayLoginForm}>Log In</button>\r\n                <button type=\"button\" className=\"toggle-btn\" onClick={displayRegisterForm}>Register</button>\r\n            </div>\r\n            {displayLogin && <div className=\"social-icons\">\r\n                <img \r\n                    src={process.env.PUBLIC_URL + '/images/google.png'} \r\n                    alt=\"google login\"\r\n                    onClick={() => {\r\n                        window.location.href = \"/auth/google\";\r\n                    }}/>\r\n            </div>}\r\n            <form id=\"login\" ref={loginFormRef} className=\"input-group\">\r\n                <input name=\"username\" value={email} onChange={handleChangeEmail} type=\"text\" className=\"input-field\" placeholder=\"Enter your email\"/>\r\n                <input name=\"password\" value={password} onChange={handleChangePassword} type=\"password\" className=\"input-field\" placeholder=\"Enter your password\"/>\r\n                <button type=\"submit\" className=\"submit-btn\" onClick={handleLogin}>Login</button>\r\n            </form>\r\n            <form id=\"register\" ref={registerFormRef} className=\"input-group\">\r\n                <input name=\"firstName\" value={firstName} onChange={handleChangeFirstName} type=\"text\" className=\"input-field\" placeholder=\"Enter your first name\"/>\r\n                <input name=\"lastName\" value={lastName} onChange={handleChangeLastName} type=\"text\" className=\"input-field\" placeholder=\"Enter your last name\"/>\r\n                <input name=\"username\" value={email} onChange={handleChangeEmail} type=\"text\" className=\"input-field\" placeholder=\"Enter your email\"/>\r\n                <input name=\"password\" value={password} onChange={handleChangePassword} type=\"password\" className=\"input-field\" placeholder=\"Create a password\"/>\r\n                <button type=\"submit\" className=\"submit-btn\" onClick={handleRegister}>Register</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n}"]},"metadata":{},"sourceType":"module"}